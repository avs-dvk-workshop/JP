---
title: '5. セットアップとインストールスクリプトの実行'


layout: nil
---

{:.steps}
### デバイスの設定およびインストールスクリプトの実行

> **NOTE:** 本ワークショップでは、作業時間の短縮のため、SDKはプリコンパイルされています。  

Alexaをアクティベートするためには、固有の情報を利用してデバイスをクラウドと認証させる必要があります。。セットアップとインストールスクリプトを始めるためには、下記をRaspberry Piで行います:

1. ラズパイデスクトップ左上にあるツールバーの黒いコンソールアイコンをクリックし、ターミナルウィンドウを開きます。
2. インストールスクリプトを実行するために、デベロッパークレデンシャルを指定します。ターミナルは/home/piディレクトリ下で開かれます。ターミナルウィンドウで:`sudo bash install_avs_sdk.sh`を入力。プロンプトで、**ProductID** (空白なし)、**ClientID**、**Client Secret**の入力が求められます。Develper Portalよりこれらをコピー＆ペーストします。ProductIDとAmazonIDは異なるので注意。
　![](assets/InstallScript.png)
3. 確認用に出力されたクルデンシャルが正しいことを確認した後、"y"を入力する。多くのメッセージとWarningが出力されますが続けます。
4. デバイス用の**Refresh token**を要求するためブラウザーウィンドウが開きます。**もしログインが正しく動いていない場合、新しいブラウザーウィンドウを開き、http://localhost:3000を入力し、ログインします。** このトークンが、デバイスをクラウド上のAVSに接続する際に**Login with Amazon** (LWA)で認証のため利用されます。もし数百万ものAlexa搭載製品を出荷する際も、各デバイスは同じProductID、ClientID、Client Secretを利用することは可能ですが、各デバイスは固有の**Refresh Token**を必要とします。通常、エンドユーザはコンパニオンアプリで製品をActivateする際に、Refresh Tokenを取得します。今回のLabでは、製造元とエンドユーザの両方の立場で進めていきます。
5. 手動で２つ目のブラウザーウィンドウを起動し、http://localhost:3000を開きます。ページを開く際は、スクリプトが実行されている必要があります。また、ProductID(空白なし)が正しく設定されているかも確認してみてください。

{:.verify}
### チェックポイント5
1. File Explorerウィンドウが開かれていない場合、画面左上のフォルダーアイコンをクリックし、ウィンドウを開きます。*/home/pi/sdk-folder/sdk-build/Integration*に移動し、**AlexaClientSDKConfig.json**ファイルを右クリックし、ファイルの中身を確認するためテキストエディタを選択します。`authdelegate`セクションの中に、デベロッパーのクルデンシャルが設定されていることが確認できます。**"refreshToken"** フィールドにも長い文字列が設定されていることを確認します。
　　![](assets/JSONcheck.png)
